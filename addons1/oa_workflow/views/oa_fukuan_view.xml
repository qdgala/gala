<?xml version="1.0"?>
<openerp>
    <data noupdate="0">

        <record model="ir.ui.view" id="view_oa_fukuan_tree">
            <field name="name">付款申请</field>
            <field name="model">oa.fukuan</field>
            <field name="arch" type="xml">
                <tree string="付款申请">
                    <field name="fukuan_no"/>
                    <field name="apply_date"/>
                    <field name="emp_id"/>
                    <field name="department_id"/>
                    <field name="state"/>

                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_oa_fukuan_form">
            <field name="name">付款申请</field>
            <field name="model">oa.fukuan</field>
            <field name="arch" type="xml">
                <form string="付款申请">
                    <header>
                        <button string="关闭" name="sq_off" states="sq" type="workflow_stop" class="oe_highlight"/>

                        <button string="付款申请人" name="sq_to" states="sq" type="workflow_submit" class="oe_highlight"/>
                        <button string="部门主管" name="bm_fz" states="bm" type="workflow_ok" class="oe_highlight"/>
                        <button string="分管副总" name="fz_cw" states="fz" type="workflow_ok" class="oe_highlight"/>
                        <button string="财务经理" name="cw_zjl" states="cw" type="workflow_ok" class="oe_highlight"/>
                        <button string="总经理" name="zjl_cn" states="zjl" type="workflow_ok" class="oe_highlight"/>
                        <button string="出纳" name="cn_fkr" states="cn" type="workflow_ok" class="oe_highlight"/>
                        <button string="付款人" name="fkr_ok" states="fkr" type="workflow_ok" class="oe_highlight"/>

                        <button string="部门主管驳回" name="bm_sq" states="bm" type="workflow_no" class="oe_highlight"/>
                        <button string="分管副总驳回" name="fz_bm" states="fz" type="workflow_no" class="oe_highlight"/>
                        <button string="财务经理驳回" name="cw_fz" states="cw" type="workflow_no" class="oe_highlight"/>
                        <button string="总经理驳回" name="zjl_cw" states="zjl" type="workflow_no" class="oe_highlight"/>

                        <button name="btn_err" type="object" string="作废" attrs="{'invisible':[('state','in',['ok','off','err'])]}"
                                style="color:white;background-color:red;" groups="oa_workflow.group_oa_department_zf_fukuan"/>
                        <field name="state" widget="statusbar" statusbar_visible="sq,bm,fz,cw,zjl,cn,fkr,ok"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="fukuan_no" readonly="1"/>
                                <field name="emp_id"/>
                                <field name="zhuangtai"/>
                                <field name="fukuanqx"/>
                                <field name="fk_bili"/>

                            </group>
                            <group>
                                <field name="apply_date"/>
                                <field name="department_id"/>
                                <field name="job_num"/>
                                <field name="fapiaoqk"/>
                                <field name="xuantian"/>
                                <field name="danhao" attrs="{'invisible':[('xuantian','=',False)]}"/>

                            </group>
                            <group string="付款说明">
                                <field name="fk_shuoming" nolabel="1"/>
                            </group>
                            <group string="付款明细">
                                <field name="fk_mingxi" nolabel="1"/>
                            </group>
                            <group>
                                <field name="sk_danwei"/>
                                <field name="kaihuhang"/>
                                <field name="heji"/>
                            </group>
                            <group>
                                <field name="fk_fangshi"/>
                                <field name="zhanghao"/>
                                <field name="daxie"/>
                            </group>
                        </group>
                        <group string="附件">
                            <field name="fujian_ids" nolabel="1" colspan="4"
                                   domain="[('res_model','=','oa.fukuan'),('res_id','=',id)]"
                                   context="{'default_res_model':'oa.fukuan','default_res_id':id}"/>
                        </group>
                        <group string="审批意见">
                            <field name="opinion_ids" nolabel="1" readonly="1" colspan="4"/>
                        </group>


                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_oa_fukuan_search">
            <field name="name">付款申请搜索视图</field>
            <field name="model">oa.fukuan</field>
            <field name="arch" type="xml">
                <search string="付款申请搜索视图">
                    <filter string="待办" name="message_needaction" domain="[('is_needaction','=',True)]"/>
                    <!--<field name="name"/>-->
                    <!--<separator/>-->
                    <!--<filter string="未完成任务" domain="[('state','!=','done')]"/>-->
                    <!--<separator/>-->
                    <!--<group expand="0" string="Group By">-->
                    <!--<filter string="状态" domain="[]" context="{'group_by':'state'}"/>-->
                    <!--</group>-->

                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_oa_fukuan">
            <field name="name">付款申请</field>
            <field name="res_model">oa.fukuan</field>
            <field name="view_type">form</field>
            <field name="domain"></field>
            <field name="view_mode">tree,form</field>
            <!--<field name="context"></field>-->
            <field name="search_view_id" ref="view_oa_fukuan_search"/>
            <field name="view_id" ref="view_oa_fukuan_tree"/>
        </record>

        <menuitem id="menu_action_oa_fukuan" action="action_oa_fukuan" parent="menu_oa_wkf" sequence="70" name="付款申请"/>

        <!--流水号定义-->
        <record forcecreate="1" id="seq_oa_fukuan_no" model="ir.sequence">
            <field name="name">付款编号</field>
            <field name="code">oa.fukuan.no</field>
            <field name="padding" eval="5"/>
            <field name="prefix">FK</field>
            <!--<field name="number_next_actual" eval="4000"/>-->
        </record>


    </data>
</openerp>