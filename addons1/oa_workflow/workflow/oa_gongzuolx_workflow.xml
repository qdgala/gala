<?xml version="1.0"?>
<openerp>
    <data noupdate="0">

        <!--定义工作流-->
        <record id="oa_gongzuolx_workflow" model="workflow">
            <field name="name">工作联系单</field>
            <field name="osv">oa.gongzuolx</field>
            <field name="on_create">True</field>
        </record>

        <!--活动（Activity）定义-->
        <record id="activity_oa_gongzuolx_sq" model="workflow.activity">
            <field name="wkf_id" ref="oa_gongzuolx_workflow"/>
            <field name="flow_start">True</field>
            <field name="name">申请人申请</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('sq')</field>
        </record>
        <record id="activity_oa_gongzuolx_jsrqr" model="workflow.activity">
            <field name="wkf_id" ref="oa_gongzuolx_workflow"/>
            <field name="name">接收人确认</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('jsrqr')</field>
        </record>
        <record id="activity_oa_gongzuolx_sqrqr" model="workflow.activity">
            <field name="wkf_id" ref="oa_gongzuolx_workflow"/>
            <field name="name">申请人确认</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('sqrqr')</field>
        </record>
        <record id="activity_oa_gongzuolx_ok" model="workflow.activity">
            <field name="wkf_id" ref="oa_gongzuolx_workflow"/>
            <field name="flow_stop">True</field>
            <field name="name">归档</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('ok')</field>
        </record>
        <record id="activity_oa_gongzuolx_off" model="workflow.activity">
            <field name="wkf_id" ref="oa_gongzuolx_workflow"/>
            <field name="flow_stop">True</field>
            <field name="name">关闭</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('off')</field>
        </record>

        <!--迁移（Transition）的定义-->
        <record id="trans_oa_gongzuolx_sq_off" model="workflow.transition">
            <field name="act_from" ref="activity_oa_gongzuolx_sq"/>
            <field name="act_to" ref="activity_oa_gongzuolx_off"/>
            <field name="signal">sq_off</field>
            <field name="condition">is_from_user()</field>
        </record>
        <record id="trans_oa_gongzuolx_sq_jsrqr" model="workflow.transition">
            <field name="act_from" ref="activity_oa_gongzuolx_sq"/>
            <field name="act_to" ref="activity_oa_gongzuolx_jsrqr"/>
            <field name="signal">sq_jsrqr</field>
            <field name="condition">is_from_user()</field>
        </record>
        <record id="trans_oa_gongzuolx_jsrqr_sqrqr" model="workflow.transition">
            <field name="act_from" ref="activity_oa_gongzuolx_jsrqr"/>
            <field name="act_to" ref="activity_oa_gongzuolx_sqrqr"/>
            <field name="signal">jsrqr_sqrqr</field>
            <field name="condition">is_to_user()</field>
        </record>
        <record id="trans_oa_gongzuolx_sqrqr_ok" model="workflow.transition">
            <field name="act_from" ref="activity_oa_gongzuolx_sqrqr"/>
            <field name="act_to" ref="activity_oa_gongzuolx_ok"/>
            <field name="signal">sqrqr_ok</field>
            <field name="condition">is_from_user()</field>
        </record>

    </data>
</openerp>