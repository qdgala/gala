<?xml version="1.0"?>
<openerp>
    <data noupdate="0">

        <!--定义工作流-->
        <record id="oa_yongzhang_workflow" model="workflow">
            <field name="name">用章申请</field>
            <field name="osv">oa.yongzhang</field>
            <field name="on_create">True</field>
        </record>

        <!--活动（Activity）定义-->
        <record id="activity_oa_yongzhang_sq" model="workflow.activity">
            <field name="wkf_id" ref="oa_yongzhang_workflow"/>
            <field name="flow_start">True</field>
            <field name="name">副总申请</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('sq')</field>
        </record>
        <record id="activity_oa_yongzhang_xzld" model="workflow.activity">
            <field name="wkf_id" ref="oa_yongzhang_workflow"/>
            <field name="name">行政部领导审批</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('xzld')</field>
        </record>
        <record id="activity_oa_yongzhang_zjl" model="workflow.activity">
            <field name="wkf_id" ref="oa_yongzhang_workflow"/>
            <field name="name">总经理审批</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('zjl')</field>
        </record>
        <record id="activity_oa_yongzhang_xzzy" model="workflow.activity">
            <field name="wkf_id" ref="oa_yongzhang_workflow"/>
            <field name="name">行政专员确认</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('xzzy')</field>
        </record>
        <record id="activity_oa_yongzhang_ok" model="workflow.activity">
            <field name="wkf_id" ref="oa_yongzhang_workflow"/>
            <field name="flow_stop">True</field>
            <field name="name">完成</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('ok')</field>
        </record>
        <record id="activity_oa_yongzhang_off" model="workflow.activity">
            <field name="wkf_id" ref="oa_yongzhang_workflow"/>
            <field name="flow_stop">True</field>
            <field name="name">关闭</field>
            <field name="kind">function</field>
            <field name="action">wkf_change_and_notice('off')</field>
        </record>

        <!--迁移（Transition）的定义-->
        <record id="trans_oa_yongzhang_sq_off" model="workflow.transition">
            <field name="act_from" ref="activity_oa_yongzhang_sq"/>
            <field name="act_to" ref="activity_oa_yongzhang_off"/>
            <field name="signal">sq_off</field>
            <field name="condition">is_user()</field>
            <field name="group_id" ref="oa_workflow.group_oa_department_fz"/>
        </record>
        <record id="trans_oa_yongzhang_sq_xzld" model="workflow.transition">
            <field name="act_from" ref="activity_oa_yongzhang_sq"/>
            <field name="act_to" ref="activity_oa_yongzhang_xzld"/>
            <field name="signal">sq_xzld</field>
            <field name="condition">is_user()</field>
            <field name="group_id" ref="oa_workflow.group_oa_department_fz"/>
        </record>

        <record id="trans_oa_yongzhang_xzld_xzzy" model="workflow.transition">
            <field name="act_from" ref="activity_oa_yongzhang_xzld"/>
            <field name="act_to" ref="activity_oa_yongzhang_xzzy"/>
            <field name="signal">xzld_zjl_or_xzzy</field>
            <field name="condition">way == 'gz'</field>
            <field name="group_id" ref="oa_workflow.group_oa_department_xzb"/>
        </record>

        <record id="trans_oa_yongzhang_xzld_zjl" model="workflow.transition">
            <field name="act_from" ref="activity_oa_yongzhang_xzld"/>
            <field name="act_to" ref="activity_oa_yongzhang_zjl"/>
            <field name="signal">xzld_zjl_or_xzzy</field>
            <field name="condition">way == 'wj'</field>
            <field name="group_id" ref="oa_workflow.group_oa_department_xzb"/>
        </record>

        <record id="trans_oa_yongzhang_zjl_xzzy" model="workflow.transition">
            <field name="act_from" ref="activity_oa_yongzhang_zjl"/>
            <field name="act_to" ref="activity_oa_yongzhang_xzzy"/>
            <field name="signal">zjl_xzzy</field>
            <field name="group_id" ref="oa_workflow.group_oa_department_boss"/>
        </record>

        <record id="trans_oa_yongzhang_xzzy_ok" model="workflow.transition">
            <field name="act_from" ref="activity_oa_yongzhang_xzzy"/>
            <field name="act_to" ref="activity_oa_yongzhang_ok"/>
            <field name="signal">xzzy_ok</field>
            <field name="group_id" ref="oa_workflow.group_oa_department_xzzy"/>
        </record>

        <!--回退流程-->
        <record id="trans_oa_yongzhang_xzld_sq" model="workflow.transition">
            <field name="act_from" ref="activity_oa_yongzhang_xzld"/>
            <field name="act_to" ref="activity_oa_yongzhang_sq"/>
            <field name="signal">xzld_sq</field>
            <field name="condition">way == 'wj'</field>
            <field name="group_id" ref="oa_workflow.group_oa_department_xzb"/>
        </record>

        <record id="trans_oa_yongzhang_zjl_xzld" model="workflow.transition">
            <field name="act_from" ref="activity_oa_yongzhang_zjl"/>
            <field name="act_to" ref="activity_oa_yongzhang_xzld"/>
            <field name="signal">zjl_xzld</field>
            <field name="group_id" ref="oa_workflow.group_oa_department_boss"/>
        </record>

    </data>
</openerp>